---
title: "CLI Reference"
description: "Smoltbot CLI commands and usage"
sidebarTitle: "CLI"
icon: "terminal"
---

# CLI Reference

The `smoltbot` CLI configures your local environment for transparent AI agent tracing and provides commands to query your agent's transparency data.

## Installation

```bash
npm install -g @mnemom/smoltbot
```

## Commands

<Steps>

### `smoltbot init`

Configure tracing for your AI agent. This command detects your configured AI provider API keys (Anthropic, OpenAI, Gemini) and configures your local environment to route API calls through the Mnemom gateway.

```bash
smoltbot init
```

**What it does:**

- Detects configured AI provider API keys in your environment
- Configures your local environment to route API calls through the Mnemom gateway
- Registers your agent automatically using a SHA-256 hash of your API key (the key itself never leaves your machine)
- Supports multi-provider setups (Anthropic, OpenAI, Gemini)

**Options:**

| Option | Description |
|--------|-------------|
| `--gateway=<url>` | Use a custom gateway URL (for self-hosted deployments) |

**Example:**

```bash
# Default setup — uses Mnemom hosted gateway
smoltbot init

# Self-hosted gateway
smoltbot init --gateway=https://your-domain.com
```

### `smoltbot status`

Show agent status, connected providers, and connection info.

```bash
smoltbot status
```

**Output includes:**

- Agent ID
- Connected providers (Anthropic, OpenAI, Gemini)
- Gateway URL
- Connection status
- Last activity timestamp

**Example output:**

```
Agent:    agent_abc123def456
Gateway:  https://gateway.mnemom.ai
Status:   Connected
Providers:
  Anthropic  ✓ (Claude Opus 4.6)
  OpenAI     ✓ (GPT-5.2)
  Gemini     ✗ (not configured)
Last seen: 2 minutes ago
```

### `smoltbot integrity`

Display integrity score and verification statistics for your agent.

```bash
smoltbot integrity
```

**Output includes:**

- Overall integrity ratio (percentage of `clear` verdicts)
- Verification statistics (total traces, violations, warnings)
- Drift alert status
- Recent concern categories

**Example output:**

```
Integrity Score: 0.94 (94%)
Traces verified: 1,247
Violations:      12 (3 CRITICAL, 9 HIGH)
Drift alerts:    0 active
Window:          10 checkpoints, 2h retention
```

### `smoltbot logs`

Show recent traces and actions.

```bash
smoltbot logs [-l N]
```

**Options:**

| Option | Description | Default |
|--------|-------------|---------|
| `-l N` | Number of log entries to display | 10 |

**Example:**

```bash
# Show last 10 traces (default)
smoltbot logs

# Show last 50 traces
smoltbot logs -l 50
```

**Example output:**

```
2026-02-17 14:32:01  CLEAR      api_call    Claude Opus 4.6    "Search for documents"
2026-02-17 14:31:45  CLEAR      api_call    Claude Opus 4.6    "Summarize results"
2026-02-17 14:31:12  REVIEW     api_call    GPT-5.2            "Execute trade"
  └─ concern: autonomy_violation (HIGH) — action exceeds bounded_actions
2026-02-17 14:30:58  CLEAR      api_call    Claude Opus 4.6    "Draft email"
```

### `smoltbot card show`

Fetch your agent's active alignment card and display it with colored, structured output showing values, autonomy envelope, forbidden actions, escalation triggers, and audit commitment.

```bash
smoltbot card show
```

**Example output:**

```
═══════════════════════════════════════════════════
  Alignment Card  ac-a4c12709-v2
═══════════════════════════════════════════════════

  Version    0.1.0
  Issued     2026-02-21
  Expires    2026-08-21

  Values     transparency  honesty  harm_prevention
             editorial_independence  source_attribution
             investigative_rigor
  Hierarchy  lexicographic

  Bounded    inference  read  write  edit  exec
             web_fetch  web_search
  Forbidden  fabricate_sources  impersonate_human  ...
  Escalation named_entity_critical → escalate
             legal_claims_present → escalate

  Audit      ap-trace-v1 · 365 days · queryable · append_only
```

### `smoltbot card publish <file>`

Read a JSON alignment card file, validate it against the AAP spec, confirm before publishing, and upload to your agent's alignment card via the API. Optionally triggers re-verification of existing traces against the new card.

```bash
smoltbot card publish <file>
```

**Options:**

| Option | Description |
|--------|-------------|
| `--no-verify` | Skip re-verification prompt after publish |
| `--yes` | Skip confirmation prompt |

**Example:**

```
$ smoltbot card publish alignment-card.json

  Validating alignment-card.json...
  ✓ Valid JSON
  ✓ Required blocks present (principal, values, autonomy, audit)
  ✓ 6 declared values (3 standard, 3 custom with definitions)
  ✓ 7 bounded actions
  ✓ 2 escalation triggers (evaluable conditions)
  ✓ Card not expired

  Publish this card for agent smolt-a4c12709? (y/N) y

  ✓ Card published: ac-a4c12709-v2
  Re-verify existing traces against new card? (y/N) y
  ✓ 247 traces re-verified
```

### `smoltbot card validate <file>`

Local-only validation with no API call. Checks AAP spec compliance. CI-friendly: exit code 0 on pass, 1 on fail.

```bash
smoltbot card validate <file>
```

**Example:**

```
$ smoltbot card validate alignment-card.json

  ✓ Valid JSON
  ✓ Required blocks: principal, values, autonomy_envelope, audit_commitment
  ✓ values.declared: 6 values (non-empty)
  ✓ Custom values defined: editorial_independence, source_attribution, investigative_rigor
  ✓ bounded_actions: 7 actions (non-empty)
  ✓ escalation_triggers: 2 triggers (evaluable conditions)
  ✓ expires_at: 2026-08-21 (valid)

  Card is valid.
```

### `smoltbot register <name>`

Register a new named agent. Each named agent gets its own distinct identity and trace history, even when sharing the same API key. The name is stored on the server on first traced API call and displayed on the dashboard.

```bash
smoltbot register my-coder
```

**Options:**

| Option | Description |
|--------|-------------|
| `--openclaw` | Configure using OpenClaw |
| `--standalone` | Configure standalone mode |
| `--set-default` | Set the new agent as default |

**Example:**

```bash
# Register a new agent for coding tasks
smoltbot register my-coder --openclaw

# Register and set as default
smoltbot register my-researcher --set-default
```

### `smoltbot agents`

List all registered agents with their IDs, providers, and creation dates.

```bash
smoltbot agents
```

**Example output:**

```
  default (default)
    Agent ID:  smolt-a4c12709
    Provider:  openclaw
    Created:   2/7/2026

  my-coder
    Agent ID:  smolt-b8e34f21
    Provider:  openclaw
    Created:   2/23/2026

  Total: 2 agent(s)
```

### `smoltbot agents default <name>`

Set the default agent used when no `--agent` flag is provided.

```bash
smoltbot agents default my-coder
```

### `smoltbot agents remove <name>`

Remove a registered agent from the local configuration.

```bash
smoltbot agents remove my-coder
```

</Steps>

## Global Options

| Option | Description |
|--------|-------------|
| `--agent <name>` | Select which agent to use for the command |
| `--version` | Show CLI version |
| `--help` | Show help text |

**Agent selection priority:**
1. `--agent <name>` flag
2. `SMOLTBOT_AGENT` environment variable
3. Default agent from config

**Example:**

```bash
# Check status of a specific agent
smoltbot status --agent my-coder

# Use environment variable
SMOLTBOT_AGENT=my-coder smoltbot logs

# Default agent (no flag needed)
smoltbot status
```

## Workflow

A typical workflow with the smoltbot CLI:

<Steps>

### Set up tracing

```bash
smoltbot init
```

### Verify your agent is connected

```bash
smoltbot status
```

### Use your AI agent normally

Your API calls are automatically traced through the gateway. No code changes required.

### Check integrity

```bash
smoltbot integrity
```

### Register additional agents (optional)

```bash
smoltbot register my-researcher --openclaw
smoltbot status --agent my-researcher
```

### Review recent activity

```bash
smoltbot logs -l 20
```

### Customize your alignment card (optional)

Create an alignment card JSON file and publish it:

```bash
smoltbot card validate my-card.json
smoltbot card publish my-card.json
```

See the [Card Management guide](/guides/card-management) for how to build a card from scratch.

### Define a governance policy (optional)

Create and publish a policy that maps your agent's tools to alignment card capabilities:

```bash
smoltbot policy init
# Edit policy.yaml to define capability mappings and forbidden rules
smoltbot policy validate policy.yaml
smoltbot policy publish policy.yaml
```

See the [Policy CLI Reference](/smoltbot/policy-cli) for all policy subcommands and the [Policy Management guide](/guides/policy-management) for a full walkthrough.

### Link to your Mnemom account (optional)

Associate your agent with your Mnemom account for a private dashboard:

1. Run `smoltbot status` to get your agent ID
2. Visit [mnemom.ai/claim](https://mnemom.ai/claim) and sign in (or create a free account)
3. The CLI will also offer to open this page for you after `smoltbot register`

</Steps>

## Policy Commands

The `smoltbot policy` subcommands manage governance policies for your agents. For full reference, see [Policy CLI Reference](/smoltbot/policy-cli).

| Command | Description |
|---------|-------------|
| `policy init` | Generate a starter policy.yaml |
| `policy validate <file>` | Local schema validation (CI-friendly exit codes) |
| `policy publish <file>` | Upload policy to agent |
| `policy list` | List published policies |
| `policy test <file>` | Dry-run against historical traces |
| `policy evaluate` | CI/CD gate evaluation |

## Supported Providers

The CLI automatically detects and configures tracing for these providers:

| Provider | Models | Thinking/AIP | Auth Method |
|----------|--------|-------------|-------------|
| Anthropic | Claude Opus 4.6, Opus 4.5, Sonnet 4.5 | Full (thinking blocks) | `x-api-key` |
| OpenAI | GPT-5.2, GPT-5.2 Pro, GPT-5 | Via reasoning summaries | `Authorization: Bearer` |
| Gemini | Gemini 2.5 Pro, Gemini 3 Pro | Full (thought parts) | `x-goog-api-key` |

## Related

- [Smoltbot Overview](/smoltbot/overview) — Architecture and how it works
- [Policy CLI Reference](/smoltbot/policy-cli) — Policy management commands
- [Enforcement Modes](/smoltbot/enforcement) — Configure violation response behavior
